import {getTintModule} from '../../tint/getTint' 
import {program} from '../../program/Program'
import {field,Vector,Matrix}  from '../../program/FieldsFactory'

let taichiExample5 = async () => {
    let tint = await getTintModule()
    let spvToWgsl = tint.tintSpvToWgsl
    await program.materializeRuntime()

    let f = field([10])

    program.materializeCurrentTree()

    let spv = [119734787,66304,0,63,0,131089,1,720906,1599492179,1599227979,1919906931,1600481121,1717990754,1935635045,1634889588,1667196263,1936941420,0,393227,1,1280527431,1685353262,808793134,0,196622,0,1,393231,5,11,1852399981,0,16,393232,11,17,128,1,1,262149,11,1852399981,0,327685,14,1635020660,1818582892,7564645,393221,24,1635020660,1852399468,1935896438,0,196613,29,26985,393221,35,1953460082,1718968927,1601332582,48,262149,18,846228852,0,262149,42,913337716,0,262149,43,930114932,0,262149,44,946892148,0,262149,45,963669364,0,262215,16,11,28,262215,32,6,4,327752,33,0,35,0,196679,33,2,262215,35,34,0,262215,35,33,0,262215,62,11,25,131092,2,262165,3,32,1,262165,4,32,0,131091,6,196641,7,6,262167,8,4,3,262187,3,9,0,262187,3,14,10,262176,15,1,8,262203,15,16,1,262176,17,1,4,262187,4,18,0,262187,3,24,128,196637,32,3,196638,33,32,262176,34,12,33,262203,34,35,12,262187,3,42,0,262187,3,44,15,262187,4,51,4,262187,4,55,2,262176,57,12,3,262187,4,60,128,262187,4,61,1,393260,8,62,60,61,61,327734,6,11,0,7,131320,12,327745,17,19,16,18,262205,4,20,19,262268,3,21,20,131321,25,131320,25,458997,3,29,21,12,59,26,327857,2,30,29,14,262390,28,26,0,262394,30,26,28,131320,26,327875,3,43,29,42,327879,3,45,43,44,262268,4,50,45,327812,4,52,50,51,327875,4,56,52,55,393281,57,58,35,9,56,196670,58,29,327808,3,59,29,24,131321,25,131320,28,65789,65592]
    let code = spvToWgsl(spv)
    console.log(code)

    let initKernel = program.runtime!.createKernel([
        {
            code:code,
            invocatoions: 10
        },
    ])
    
    program.runtime!.launchKernel(initKernel)
    
    let rootBufferCopy = await program.runtime!.copyRootBufferToHost(0)
    console.log("Example 5 results:")
    console.log(rootBufferCopy)
    
}

export {taichiExample5}